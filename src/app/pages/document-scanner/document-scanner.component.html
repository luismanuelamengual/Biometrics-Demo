<mat-card>
    <mat-card-header>
        <mat-card-title>Escaneador de documentos</mat-card-title>
        <mat-card-subtitle>Lectura de los datos del documento</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
        <mat-vertical-stepper>
            <mat-step label="Foto del frente documento">
                <app-dni-picture-getter (dniCaptured)="onDniFrontCaptured($event)"></app-dni-picture-getter>
            </mat-step>
            <mat-step label="Foto del dorso documento">
                <app-dni-picture-getter (dniCaptured)="onDniBackCaptured($event)"></app-dni-picture-getter>
            </mat-step>
        </mat-vertical-stepper>
        <div class="card-footer">
            <button mat-button mat-raised-button color="primary" (click)="scanDocument()" [disabled]="documentFrontPicture == null || documentBackPicture == null || verifying == true">
                <ng-container *ngIf="verifying == false && !verificationDniResults">Leer documento</ng-container>
                <ng-container *ngIf="verifying == false && verificationDniResults">Leer documento nuevamente</ng-container>
                <ng-container *ngIf="verifying == true">Verificando ...</ng-container>
            </button>
        </div>
    </mat-card-content>
</mat-card>

<mat-card *ngIf="verificationDniResults" class="results-card">
    <mat-card-header>
        <mat-card-title>Datos del documento</mat-card-title>
    </mat-card-header>
    <mat-card-content>
        <div class="results-section" *ngIf="verificationDniResults.data">
            <div *ngFor="let dataItem of verificationDniResults.data.information | keyvalue" class="verification-result-item">
                <div class="verification-label">{{ formatDocumentItemKey(dataItem) }}</div>
                <div class="verification-value verification-value-success">{{ formatDocumentItem(dataItem) }}</div>
            </div>
        </div>
        <div *ngIf="!verificationDniResults.data">
            No se pudieron leer los datos del documento
        </div>
    </mat-card-content>
</mat-card>
